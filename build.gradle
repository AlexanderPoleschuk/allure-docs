buildscript {
    repositories {
        jcenter()
    }

    dependencies {
        classpath 'org.asciidoctor:asciidoctor-gradle-plugin:1.5.3'
        classpath 'org.ajoberstar:gradle-git:1.7.1'
    }
}

apply plugin: 'org.ajoberstar.github-pages'
apply plugin: 'org.asciidoctor.convert'

asciidoctorj {
    version = '1.5.4'
}

asciidoctor {
    sourceDir = file('docs')
    sources {
        include '**/index.adoc'
    }
    resources {
        from(sourceDir) {
            include 'index.html', '**/images/**'
        }
    }

    attributes docinfo: '', imagesdir: 'images', icons: 'font', numbered: '', toc: 'right', toclevels: 2,
            'source-highlighter': 'coderay'

    outputDir = file('build/docs')
}

githubPages {
    repoUri = 'https://github.com/allure-framework/allure-docs.git'

    pages {
        from file(asciidoctor.outputDir.path + '/html5')
    }
}


build.finalizedBy(asciidoctor)